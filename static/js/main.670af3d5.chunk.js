(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),a=n(9),o=n.n(a),r=(n(14),n(3)),s=n(2),l=(n(15),n(0)),d=function(e){var t=e.distance,n=void 0===t?0:t,c=e.time,a=void 0===c?0:c,o=e.state,r=void 0===o?0:o,s=Object(i.useMemo)((function(){return"".concat(a/1e3)}),[a]);return Object(l.jsx)("div",{style:u.container,children:Object(l.jsxs)("div",{style:u.distanceWrap,children:[Object(l.jsx)("div",{style:u.label,children:"Distance"}),Object(l.jsx)("div",{style:u.distance,children:(n||0).toFixed(2)}),Object(l.jsx)("div",{style:u.unit,children:"Inches"}),r>0&&Object(l.jsxs)("div",{style:u.timer,children:["Timer: ",s,"s"]})]})})},u={container:{display:"flex",flexDirection:"column",flex:1,padding:15},title:{fontSize:24},distanceWrap:{display:"flex",flexDirection:"column",flex:1,alignItems:"center",justifyContent:"center"},label:{fontSize:30},distance:{fontSize:100},unit:{fontSize:30},timer:{marginTop:30,fontSize:35,marginBottom:30}},b=n(5),j=n(8),f=n.n(j),m=function(e){var t=e.data,n=e.keyExtractor,i=e.renderItem;return Object(l.jsx)("div",{children:t.map((function(e,t){var c=n(e,t);return Object(l.jsx)("div",{children:i({item:e,index:t})},c)}))})},v=function(e){var t=e.data,n=void 0===t?[]:t,c=e.clearLogs,a=e.names,o=e.setNames,d=e.selectedName,u=e.setSelectedName,j=Object(i.useState)(""),v=Object(s.a)(j,2),x=v[0],O=v[1],h=Object(i.useState)(f()().format("YYYY-MM-DD")),p=Object(s.a)(h,2),y=p[0],S=p[1],C=n.filter((function(e){return e.name===d&&f()(e.dateTime).isSame(y,"date")}));return Object(l.jsxs)("div",{style:g.container,children:[Object(l.jsx)("div",{style:{marginBottom:10},children:Object(l.jsx)("input",{type:"date",value:y,onChange:function(e){return S(e.target.value)}})}),Object(l.jsxs)("div",{style:{marginBottom:10},children:[Object(l.jsx)("input",{value:x,onChange:function(e){return O(e.target.value)}}),Object(l.jsx)("button",{onClick:function(){o((function(e){var t=[].concat(Object(b.a)(e),[x]);return localStorage.setItem("names",JSON.stringify(t)),t})),O("")},children:"+ Add"})]}),Object(l.jsx)("div",{style:g.nameRow,children:a.map((function(e){return Object(l.jsxs)("div",{style:e===d?g.activeTag:g.tag,children:[Object(l.jsx)("span",{onClick:function(){return u(e)},children:e}),Object(l.jsx)("span",{style:{cursor:"pointer"},onClick:function(){o((function(t){var n=t.filter((function(t){return t!==e}));return localStorage.setItem("names",JSON.stringify(n)),n}))},children:"X"})]})}))}),Object(l.jsx)("hr",{}),Object(l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(l.jsx)("button",{onClick:function(){window.confirm("Are you sure to clear all logs")&&c()},children:"Clear"}),Object(l.jsx)("button",{onClick:function(){var e=["No.,Distance(in.),Time(sec.),Name,Date Time"].concat(Object(b.a)(C.map((function(e,t){return"".concat(t+1,",").concat((e.distance||0).toFixed(2),",").concat(e.time/1e3,",").concat(e.name,",").concat(e.dateTime)})))).join("\n"),t="data:text/csv;charset=utf-8,".concat(e),n=encodeURI(t);window.open(n)},children:"Export"})]}),Object(l.jsxs)("div",{style:g.listItem,children:[Object(l.jsx)("div",{style:Object(r.a)(Object(r.a)({},g.th),g.number),children:"No."}),Object(l.jsx)("div",{style:Object(r.a)(Object(r.a)({},g.th),g.distance),children:"Distance (in.)"}),Object(l.jsx)("div",{style:Object(r.a)(Object(r.a)({},g.th),g.time),children:"Time (sec.)"})]}),Object(l.jsx)(m,{data:C,keyExtractor:function(e,t){return t.toString()},renderItem:function(e){var t=e.item,n=e.index,i=t.time/1e3,c="".concat(i);return Object(l.jsxs)("div",{style:g.listItem,children:[Object(l.jsxs)("div",{style:g.number,children:["#",n+1]}),Object(l.jsx)("div",{style:g.distance,children:(t.distance||0).toFixed(2)}),Object(l.jsx)("div",{style:g.time,children:c})]})}})]})},g={container:{flex:1,padding:15,paddingBottom:100},title:{fontSize:24},listItem:{display:"flex",flexDirection:"row",paddingTop:5,paddingBottom:5},th:{fontWeight:"bold"},number:{flex:1,fontSize:20},distance:{flex:3,divAlign:"right",fontSize:20},time:{flex:3,divAlign:"right",fontSize:20},tag:{border:"1px solid #d0d0d0",backgroundColor:"#fff",padding:5,width:"fit-content",display:"flex",gap:3},activeTag:{border:"3px solid lime",backgroundColor:"#d0d0d0",padding:5,width:"fit-content",display:"flex",gap:3},nameRow:{display:"flex",gap:5}},x=function(e){var t=e.alarmTime,n=e.setAlarmTime,c=e.onSaveAlarmTime,a=Object(i.useMemo)((function(){return t/1e3}),[t]);return Object(l.jsx)("div",{style:O.container,children:Object(l.jsxs)("div",{style:O.distanceWrap,children:[Object(l.jsx)("div",{style:O.label,children:"Set Alarm Time (sec)"}),Object(l.jsx)("input",{type:"number",style:O.input,value:a,onChange:function(e){var t=1e3*+e.target.value;n(t)}}),Object(l.jsx)("button",{style:O.button,onClick:c,children:"Save"})]})})},O={container:{display:"flex",flexDirection:"column",flex:1,padding:15},title:{fontSize:24},distanceWrap:{display:"flex",flexDirection:"column",flex:1,alignItems:"center",justifyContent:"center"},input:{fontSize:30,padding:10,margin:20,textAlign:"center",width:100},label:{fontSize:30},button:{fontSize:20},distance:{fontSize:100},unit:{fontSize:30},timer:{marginTop:30,fontSize:35,marginBottom:30}},h="52cf0b2c-28f2-4328-aaac-6badc36777d4",p="051f540c-9a37-4284-9f98-2073e9f5bdfe",y="Arrow_ESP32",S=function(){var e=Object(i.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(0),o=Object(s.a)(a,2),r=o[0],l=o[1],d=Object(i.useState)(0),u=Object(s.a)(d,2),j=u[0],f=u[1],m=Object(i.useState)([]),v=Object(s.a)(m,2),g=v[0],x=v[1],O=Object(i.useState)(0),S=Object(s.a)(O,2),C=S[0],T=S[1],w=Object(i.useState)(0),N=Object(s.a)(w,2),k=N[0],D=N[1],A=Object(i.useState)([]),L=Object(s.a)(A,2),z=L[0],I=L[1],E=Object(i.useState)(),F=Object(s.a)(E,2),B=F[0],J=F[1],W=Object(i.useState)(null),M=Object(s.a)(W,2),P=M[0],R=M[1];Object(i.useEffect)((function(){var e=localStorage.getItem("logs"),t=e?JSON.parse(e):[];x(t);var n=localStorage.getItem("names"),i=n?JSON.parse(n):["NoName"];I(i),J(null===i||void 0===i?void 0:i[0])}),[]);var Y=Object(i.useCallback)((function(){x([]),localStorage.removeItem("logs")}),[]),q=Object(i.useCallback)((function(){navigator.bluetooth.requestDevice({filters:[{name:y}],optionalServices:[h]}).then((function(e){return console.log({device:e}),R(e),e.addEventListener("gattserverdisconnected",(function(e){var t=e.target;c(!1),console.log("Device ".concat(t.name," is disconnected."))})),e.gatt.connect()})).then((function(e){return console.log({server:e}),c(e.connected),e.getPrimaryService(h)})).then((function(e){return console.log({service:e}),e.getCharacteristic(p)})).then((function(e){return console.log({characteristic:e}),e.startNotifications()})).then((function(e){e.addEventListener("characteristicvaluechanged",(function(e){var t=e.target.value,n=new TextDecoder("utf-8").decode(t).split(","),i=Object(s.a)(n,3),c=i[0],a=i[1],o=i[2],r=+a,d=+o,u=+c;l(r),f(d),T(u),2===u&&x((function(e){var t=[].concat(Object(b.a)(e),[{distance:r,time:d,dateTime:new Date,name:B}]);return localStorage.setItem("logs",JSON.stringify(t)),t}))})),console.log("Notifications have been started.")})).catch((function(e){console.error(e)}))}),[B]),H=Object(i.useCallback)((function(){P&&(P.gatt.connected?P.gatt.disconnect():console.log("Already disconnected"),c(!1),R(null))}),[P]);Object(i.useEffect)((function(){B&&(H(),q())}),[B,q,H]);return{distance:r,time:j,logs:g,isConnected:n,scanAndConnect:q,clearLogs:Y,state:C,alarmTime:k,setAlarmTime:D,onSaveAlarmTime:function(){navigator.bluetooth.requestDevice({filters:[{name:y}],optionalServices:[h]}).then((function(e){return console.log({device:e}),e.addEventListener("gattserverdisconnected",(function(e){var t=e.target;c(!1),console.log("Device ".concat(t.name," is disconnected."))})),e.gatt.connect()})).then((function(e){return console.log({server:e}),c(e.connected),e.getPrimaryService(h)})).then((function(e){return console.log({service:e}),e.getCharacteristic(p)})).then((function(e){if(k>=0){var t=k.toString(),n=new TextEncoder("utf-8");e.writeValue(n.encode(t)),alert("Saved !!!")}else alert("Time is not valid !!!")})).catch((function(e){console.error(e)}))},names:z,selectedName:B,setNames:I,setSelectedName:J}};var C=function(){var e=S(),t=e.distance,n=e.time,c=e.logs,a=e.isConnected,o=e.scanAndConnect,u=e.clearLogs,b=e.state,j=e.alarmTime,f=e.setAlarmTime,m=e.onSaveAlarmTime,g=e.names,O=e.selectedName,h=e.setNames,p=e.setSelectedName,y=Object(i.useState)("home"),C=Object(s.a)(y,2),w=C[0],N=C[1],k=Object(i.useMemo)((function(){return{home:{component:d,props:{distance:t,time:n,state:b}},logs:{component:v,props:{data:c,clearLogs:u,names:g,setNames:h,selectedName:O,setSelectedName:p}},setting:{component:x,props:{alarmTime:j,setAlarmTime:f,onSaveAlarmTime:m}}}}),[c,t,n,u,b,j,f,m,g,h,O,p]),D=k[w].component,A=k[w].props;return Object(l.jsxs)("div",{style:T.container,children:[Object(l.jsxs)("div",{style:T.status,children:[Object(l.jsx)("div",{style:T.scanningdiv,children:a?"Connected":"Disconnected"}),Object(l.jsx)("button",{style:T.button,onClick:o,children:"Scan and Connect"})]}),Object(l.jsx)("div",{style:T.content,children:Object(l.jsx)(D,Object(r.a)({},A))}),Object(l.jsxs)("div",{style:T.tabs,children:[Object(l.jsx)("div",{style:Object(r.a)(Object(r.a)({},T.tab),{borderRightWidth:1,borderRightColor:"#d0d0d0"}),onClick:function(){return N("home")},children:Object(l.jsx)("div",{style:"home"===w?T.activeLabel:T.inactiveLabel,children:"Home"})}),Object(l.jsx)("div",{style:T.tab,onClick:function(){return N("logs")},children:Object(l.jsx)("div",{style:"logs"===w?T.activeLabel:T.inactiveLabel,children:"Logs"})}),Object(l.jsx)("div",{style:T.tab,onClick:function(){return N("setting")},children:Object(l.jsx)("div",{style:"setting"===w?T.activeLabel:T.inactiveLabel,children:"Setting"})})]})]})},T={container:{display:"flex",flexDirection:"column",flex:1,minHeight:"100vh"},content:{display:"flex",flex:1,backgroundColor:"#F5F5DC",height:"100%"},tabs:{display:"flex",flexDirection:"row",position:"fixed",letf:0,right:0,width:"100%",bottom:0,borderTop:"1px solid #d0d0d0"},tab:{display:"flex",flex:1,justifyContent:"center",padding:20,backgroundColor:"#f1f1f1"},activeLabel:{display:"flex",color:"green",fontWeight:"bold"},inactiveLabel:{display:"flex",color:"#444444"},scanningText:{display:"flex",fontSize:30},status:{backgroundColor:"black",color:"white",display:"flex",justifyContent:"space-between",padding:20},button:{}},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),c(e),a(e),o(e)}))};o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(C,{})}),document.getElementById("root")),w()}},[[17,1,2]]]);
//# sourceMappingURL=main.670af3d5.chunk.js.map